{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ahmad/Downloads/ClincsManagmentSystem/app/clinics/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useEffect, useMemo, useState } from \"react\";\r\nimport Link from \"next/link\";\r\nimport Button from \"@/components/Button\";\r\n\r\ntype Clinic = {\r\n  _id: string;\r\n  name: string;\r\n  address?: string;\r\n  city?: string;\r\n  phone?: string;\r\n  specializations?: string[];\r\n  description?: string;\r\n};\r\n\r\nexport default function ClinicsPage() {\r\n  const [clinics, setClinics] = useState<Clinic[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n  const [search, setSearch] = useState(\"\");\r\n  const [specialtyFilter, setSpecialtyFilter] = useState(\"\");\r\n\r\n  useEffect(() => {\r\n    let cancelled = false;\r\n\r\n    async function loadClinics() {\r\n      try {\r\n        setLoading(true);\r\n        setError(null);\r\n\r\n        const res = await fetch(\"/api/clinics\", { method: \"GET\" });\r\n        const data = await res.json();\r\n\r\n        if (cancelled) return;\r\n\r\n        if (res.ok && Array.isArray(data)) {\r\n          setClinics(data);\r\n        } else if (res.ok && Array.isArray(data.clinics)) {\r\n          setClinics(data.clinics);\r\n        } else {\r\n          setError(\"Failed to load clinics.\");\r\n        }\r\n      } catch (err) {\r\n        console.error(\"Error loading clinics:\", err);\r\n        if (!cancelled) setError(\"Failed to load clinics.\");\r\n      } finally {\r\n        if (!cancelled) setLoading(false);\r\n      }\r\n    }\r\n\r\n    loadClinics();\r\n    return () => {\r\n      cancelled = true;\r\n    };\r\n  }, []);\r\n\r\n  const specialties = useMemo(() => {\r\n    const set = new Set<string>();\r\n    clinics.forEach((c) => {\r\n      c.specializations?.forEach((s) => set.add(s));\r\n    });\r\n    return Array.from(set).sort();\r\n  }, [clinics]);\r\n\r\n  const filteredClinics = useMemo(() => {\r\n    return clinics.filter((clinic) => {\r\n      const matchesSearch =\r\n        !search ||\r\n        clinic.name.toLowerCase().includes(search.toLowerCase()) ||\r\n        (clinic.city || \"\").toLowerCase().includes(search.toLowerCase()) ||\r\n        (clinic.address || \"\").toLowerCase().includes(search.toLowerCase());\r\n\r\n      const matchesSpecialty =\r\n        !specialtyFilter ||\r\n        clinic.specializations?.includes(specialtyFilter);\r\n\r\n      return matchesSearch && matchesSpecialty;\r\n    });\r\n  }, [clinics, search, specialtyFilter]);\r\n\r\n  return (\r\n    <main className=\"site-container py-10 space-y-6\">\r\n      <section className=\"flex flex-col gap-4 md:flex-row md:items-end md:justify-between\">\r\n        <div>\r\n          <h1 className=\"mb-1\">Find a clinic</h1>\r\n          <p className=\"text-sm text-slate-500\">\r\n            Search clinics by name, location, or specialization and book an\r\n            appointment in a few clicks.\r\n          </p>\r\n        </div>\r\n\r\n        <div className=\"flex flex-col gap-3 md:flex-row md:items-center\">\r\n          <div className=\"flex items-center gap-2\">\r\n            <input\r\n              type=\"text\"\r\n              placeholder=\"Search by name or city...\"\r\n              className=\"form-input max-w-xs\"\r\n              value={search}\r\n              onChange={(e) => setSearch(e.target.value)}\r\n            />\r\n          </div>\r\n\r\n          <div className=\"flex items-center gap-2\">\r\n            <label className=\"text-xs font-medium text-slate-600\">\r\n              Specialization\r\n            </label>\r\n            <select\r\n              className=\"form-input max-w-xs\"\r\n              value={specialtyFilter}\r\n              onChange={(e) => setSpecialtyFilter(e.target.value)}\r\n            >\r\n              <option value=\"\">All</option>\r\n              {specialties.map((s) => (\r\n                <option key={s} value={s}>\r\n                  {s}\r\n                </option>\r\n              ))}\r\n            </select>\r\n          </div>\r\n        </div>\r\n      </section>\r\n\r\n      <section>\r\n        {loading ? (\r\n          <div className=\"card\">\r\n            <p>Loading clinics...</p>\r\n          </div>\r\n        ) : error ? (\r\n          <div className=\"card\">\r\n            <p className=\"text-sm text-red-600\">{error}</p>\r\n          </div>\r\n        ) : filteredClinics.length === 0 ? (\r\n          <div className=\"card\">\r\n            <p className=\"text-sm text-slate-500\">\r\n              No clinics match your filters. Try removing some filters or\r\n              searching in another area.\r\n            </p>\r\n          </div>\r\n        ) : (\r\n          <div className=\"grid gap-6 md:grid-cols-2 xl:grid-cols-3\">\r\n            {filteredClinics.map((clinic) => (\r\n              <article\r\n                key={clinic._id}\r\n                className=\"card flex flex-col gap-3 bg-gradient-to-b from-white to-slate-50\"\r\n              >\r\n                <div className=\"flex items-start justify-between gap-3\">\r\n                  <div>\r\n                    <h3 className=\"text-lg font-semibold text-slate-900\">\r\n                      {clinic.name}\r\n                    </h3>\r\n                    <p className=\"text-xs text-slate-500\">\r\n                      {clinic.city || \"\"}{\" \"}\r\n                      {clinic.city && clinic.address ? \"â€¢\" : \"\"}\r\n                      {clinic.address || \"\"}\r\n                    </p>\r\n                  </div>\r\n                </div>\r\n\r\n                {clinic.specializations && clinic.specializations.length > 0 && (\r\n                  <div className=\"flex flex-wrap gap-1 mt-1\">\r\n                    {clinic.specializations.slice(0, 4).map((spec) => (\r\n                      <span\r\n                        key={spec}\r\n                        className=\"inline-flex items-center rounded-full bg-indigo-50 px-2 py-1 text-[11px] font-medium text-indigo-700\"\r\n                      >\r\n                        {spec}\r\n                      </span>\r\n                    ))}\r\n                    {clinic.specializations.length > 4 && (\r\n                      <span className=\"text-[11px] text-slate-500\">\r\n                        +{clinic.specializations.length - 4} more\r\n                      </span>\r\n                    )}\r\n                  </div>\r\n                )}\r\n\r\n                {clinic.description && (\r\n                  <p className=\"text-xs text-slate-500 line-clamp-3\">\r\n                    {clinic.description}\r\n                  </p>\r\n                )}\r\n\r\n                <div className=\"mt-2 flex items-center justify-between gap-3\">\r\n                  <div className=\"text-xs text-slate-500\">\r\n                    {clinic.phone && <p>Phone: {clinic.phone}</p>}\r\n                  </div>\r\n\r\n                  <Link href={`/clinics/${clinic._id}`}>\r\n                    <Button variant=\"primary\" size=\"sm\">\r\n                      View details\r\n                    </Button>\r\n                  </Link>\r\n                </div>\r\n              </article>\r\n            ))}\r\n          </div>\r\n        )}\r\n      </section>\r\n    </main>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}}]
}