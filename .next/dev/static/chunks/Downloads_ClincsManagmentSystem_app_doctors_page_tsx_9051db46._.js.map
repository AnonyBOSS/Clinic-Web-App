{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ahmad/Downloads/ClincsManagmentSystem/app/doctors/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useEffect, useMemo, useState } from \"react\";\r\nimport Link from \"next/link\";\r\nimport Button from \"@/components/Button\";\r\n\r\ntype DoctorClinic = {\r\n  _id: string;\r\n  name: string;\r\n  city?: string;\r\n};\r\n\r\ntype Doctor = {\r\n  _id: string;\r\n  full_name: string;\r\n  specializations?: string[];\r\n  years_of_experience?: number;\r\n  clinic?: DoctorClinic;\r\n  bio?: string;\r\n};\r\n\r\nexport default function DoctorsPage() {\r\n  const [doctors, setDoctors] = useState<Doctor[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n  const [search, setSearch] = useState(\"\");\r\n  const [specialtyFilter, setSpecialtyFilter] = useState(\"\");\r\n\r\n  useEffect(() => {\r\n    let cancelled = false;\r\n\r\n    async function loadDoctors() {\r\n      try {\r\n        setLoading(true);\r\n        setError(null);\r\n\r\n        const res = await fetch(\"/api/doctors\", { method: \"GET\" });\r\n        const data = await res.json();\r\n\r\n        if (cancelled) return;\r\n\r\n        if (res.ok && Array.isArray(data)) {\r\n          setDoctors(data);\r\n        } else if (res.ok && Array.isArray(data.doctors)) {\r\n          setDoctors(data.doctors);\r\n        } else {\r\n          setError(\"Failed to load doctors.\");\r\n        }\r\n      } catch (err) {\r\n        console.error(\"Error loading doctors:\", err);\r\n        if (!cancelled) setError(\"Failed to load doctors.\");\r\n      } finally {\r\n        if (!cancelled) setLoading(false);\r\n      }\r\n    }\r\n\r\n    loadDoctors();\r\n    return () => {\r\n      cancelled = true;\r\n    };\r\n  }, []);\r\n\r\n  const specialties = useMemo(() => {\r\n    const set = new Set<string>();\r\n    doctors.forEach((d) => d.specializations?.forEach((s) => set.add(s)));\r\n    return Array.from(set).sort();\r\n  }, [doctors]);\r\n\r\n  const filteredDoctors = useMemo(() => {\r\n    return doctors.filter((doctor) => {\r\n      const matchesSearch =\r\n        !search ||\r\n        doctor.full_name.toLowerCase().includes(search.toLowerCase()) ||\r\n        (doctor.clinic?.name || \"\")\r\n          .toLowerCase()\r\n          .includes(search.toLowerCase()) ||\r\n        (doctor.clinic?.city || \"\")\r\n          .toLowerCase()\r\n          .includes(search.toLowerCase());\r\n\r\n      const matchesSpecialty =\r\n        !specialtyFilter ||\r\n        doctor.specializations?.includes(specialtyFilter);\r\n\r\n      return matchesSearch && matchesSpecialty;\r\n    });\r\n  }, [doctors, search, specialtyFilter]);\r\n\r\n  return (\r\n    <main className=\"site-container py-10 space-y-6\">\r\n      <section className=\"flex flex-col gap-4 md:flex-row md:items-end md:justify-between\">\r\n        <div>\r\n          <h1 className=\"mb-1\">Find a doctor</h1>\r\n          <p className=\"text-sm text-slate-500\">\r\n            Search for specialists by name, clinic, or city and book the right\r\n            doctor for your visit.\r\n          </p>\r\n        </div>\r\n\r\n        <div className=\"flex flex-col gap-3 md:flex-row md:items-center\">\r\n          <input\r\n            type=\"text\"\r\n            placeholder=\"Search by doctor or clinic...\"\r\n            className=\"form-input max-w-xs\"\r\n            value={search}\r\n            onChange={(e) => setSearch(e.target.value)}\r\n          />\r\n\r\n          <div className=\"flex items-center gap-2\">\r\n            <label className=\"text-xs font-medium text-slate-600\">\r\n              Specialization\r\n            </label>\r\n            <select\r\n              className=\"form-input max-w-xs\"\r\n              value={specialtyFilter}\r\n              onChange={(e) => setSpecialtyFilter(e.target.value)}\r\n            >\r\n              <option value=\"\">All</option>\r\n              {specialties.map((s) => (\r\n                <option key={s} value={s}>\r\n                  {s}\r\n                </option>\r\n              ))}\r\n            </select>\r\n          </div>\r\n        </div>\r\n      </section>\r\n\r\n      <section>\r\n        {loading ? (\r\n          <div className=\"card\">\r\n            <p>Loading doctors...</p>\r\n          </div>\r\n        ) : error ? (\r\n          <div className=\"card\">\r\n            <p className=\"text-sm text-red-600\">{error}</p>\r\n          </div>\r\n        ) : filteredDoctors.length === 0 ? (\r\n          <div className=\"card\">\r\n            <p className=\"text-sm text-slate-500\">\r\n              No doctors match your filters. Try a different name, clinic, or\r\n              specialization.\r\n            </p>\r\n          </div>\r\n        ) : (\r\n          <div className=\"grid gap-6 md:grid-cols-2 xl:grid-cols-3\">\r\n            {filteredDoctors.map((doctor) => (\r\n              <article\r\n                key={doctor._id}\r\n                className=\"card flex flex-col gap-3 bg-gradient-to-b from-white to-slate-50\"\r\n              >\r\n                <div className=\"flex items-start justify-between gap-3\">\r\n                  <div>\r\n                    <h3 className=\"text-lg font-semibold text-slate-900\">\r\n                      {doctor.full_name}\r\n                    </h3>\r\n                    <p className=\"text-xs text-slate-500\">\r\n                      {doctor.specializations?.join(\" • \") || \"General doctor\"}\r\n                    </p>\r\n                  </div>\r\n                  {doctor.years_of_experience != null && (\r\n                    <span className=\"inline-flex items-center rounded-full bg-slate-100 px-2 py-1 text-[11px] font-medium text-slate-700\">\r\n                      {doctor.years_of_experience}+ yrs exp.\r\n                    </span>\r\n                  )}\r\n                </div>\r\n\r\n                {doctor.clinic && (\r\n                  <p className=\"text-xs text-slate-500\">\r\n                    {doctor.clinic.name}\r\n                    {doctor.clinic.city ? ` • ${doctor.clinic.city}` : \"\"}\r\n                  </p>\r\n                )}\r\n\r\n                {doctor.bio && (\r\n                  <p className=\"text-xs text-slate-500 line-clamp-3\">\r\n                    {doctor.bio}\r\n                  </p>\r\n                )}\r\n\r\n                <div className=\"mt-2 flex items-center justify-between gap-3\">\r\n                  <div className=\"text-[11px] text-slate-500\">\r\n                    <p>Available slots shown at booking.</p>\r\n                  </div>\r\n                  <Link href={`/doctors/${doctor._id}`}>\r\n                    <Button variant=\"primary\" size=\"sm\">\r\n                      View profile\r\n                    </Button>\r\n                  </Link>\r\n                </div>\r\n              </article>\r\n            ))}\r\n          </div>\r\n        )}\r\n      </section>\r\n    </main>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;;;AAJA;;;;AAqBe,SAAS;;IACtB,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,+MAAQ,EAAW,EAAE;IACnD,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,+MAAQ,EAAC;IACvC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,+MAAQ,EAAgB;IAElD,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,+MAAQ,EAAC;IACrC,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,IAAA,+MAAQ,EAAC;IAEvD,IAAA,gNAAS;iCAAC;YACR,IAAI,YAAY;YAEhB,eAAe;gBACb,IAAI;oBACF,WAAW;oBACX,SAAS;oBAET,MAAM,MAAM,MAAM,MAAM,gBAAgB;wBAAE,QAAQ;oBAAM;oBACxD,MAAM,OAAO,MAAM,IAAI,IAAI;oBAE3B,IAAI,WAAW;oBAEf,IAAI,IAAI,EAAE,IAAI,MAAM,OAAO,CAAC,OAAO;wBACjC,WAAW;oBACb,OAAO,IAAI,IAAI,EAAE,IAAI,MAAM,OAAO,CAAC,KAAK,OAAO,GAAG;wBAChD,WAAW,KAAK,OAAO;oBACzB,OAAO;wBACL,SAAS;oBACX;gBACF,EAAE,OAAO,KAAK;oBACZ,QAAQ,KAAK,CAAC,0BAA0B;oBACxC,IAAI,CAAC,WAAW,SAAS;gBAC3B,SAAU;oBACR,IAAI,CAAC,WAAW,WAAW;gBAC7B;YACF;YAEA;YACA;yCAAO;oBACL,YAAY;gBACd;;QACF;gCAAG,EAAE;IAEL,MAAM,cAAc,IAAA,8MAAO;4CAAC;YAC1B,MAAM,MAAM,IAAI;YAChB,QAAQ,OAAO;oDAAC,CAAC,IAAM,EAAE,eAAe,EAAE;4DAAQ,CAAC,IAAM,IAAI,GAAG,CAAC;;;YACjE,OAAO,MAAM,IAAI,CAAC,KAAK,IAAI;QAC7B;2CAAG;QAAC;KAAQ;IAEZ,MAAM,kBAAkB,IAAA,8MAAO;gDAAC;YAC9B,OAAO,QAAQ,MAAM;wDAAC,CAAC;oBACrB,MAAM,gBACJ,CAAC,UACD,OAAO,SAAS,CAAC,WAAW,GAAG,QAAQ,CAAC,OAAO,WAAW,OAC1D,CAAC,OAAO,MAAM,EAAE,QAAQ,EAAE,EACvB,WAAW,GACX,QAAQ,CAAC,OAAO,WAAW,OAC9B,CAAC,OAAO,MAAM,EAAE,QAAQ,EAAE,EACvB,WAAW,GACX,QAAQ,CAAC,OAAO,WAAW;oBAEhC,MAAM,mBACJ,CAAC,mBACD,OAAO,eAAe,EAAE,SAAS;oBAEnC,OAAO,iBAAiB;gBAC1B;;QACF;+CAAG;QAAC;QAAS;QAAQ;KAAgB;IAErC,qBACE,mOAAC;QAAK,WAAU;;0BACd,mOAAC;gBAAQ,WAAU;;kCACjB,mOAAC;;0CACC,mOAAC;gCAAG,WAAU;0CAAO;;;;;;0CACrB,mOAAC;gCAAE,WAAU;0CAAyB;;;;;;;;;;;;kCAMxC,mOAAC;wBAAI,WAAU;;0CACb,mOAAC;gCACC,MAAK;gCACL,aAAY;gCACZ,WAAU;gCACV,OAAO;gCACP,UAAU,CAAC,IAAM,UAAU,EAAE,MAAM,CAAC,KAAK;;;;;;0CAG3C,mOAAC;gCAAI,WAAU;;kDACb,mOAAC;wCAAM,WAAU;kDAAqC;;;;;;kDAGtD,mOAAC;wCACC,WAAU;wCACV,OAAO;wCACP,UAAU,CAAC,IAAM,mBAAmB,EAAE,MAAM,CAAC,KAAK;;0DAElD,mOAAC;gDAAO,OAAM;0DAAG;;;;;;4CAChB,YAAY,GAAG,CAAC,CAAC,kBAChB,mOAAC;oDAAe,OAAO;8DACpB;mDADU;;;;;;;;;;;;;;;;;;;;;;;;;;;;;0BASvB,mOAAC;0BACE,wBACC,mOAAC;oBAAI,WAAU;8BACb,cAAA,mOAAC;kCAAE;;;;;;;;;;2BAEH,sBACF,mOAAC;oBAAI,WAAU;8BACb,cAAA,mOAAC;wBAAE,WAAU;kCAAwB;;;;;;;;;;2BAErC,gBAAgB,MAAM,KAAK,kBAC7B,mOAAC;oBAAI,WAAU;8BACb,cAAA,mOAAC;wBAAE,WAAU;kCAAyB;;;;;;;;;;yCAMxC,mOAAC;oBAAI,WAAU;8BACZ,gBAAgB,GAAG,CAAC,CAAC,uBACpB,mOAAC;4BAEC,WAAU;;8CAEV,mOAAC;oCAAI,WAAU;;sDACb,mOAAC;;8DACC,mOAAC;oDAAG,WAAU;8DACX,OAAO,SAAS;;;;;;8DAEnB,mOAAC;oDAAE,WAAU;8DACV,OAAO,eAAe,EAAE,KAAK,UAAU;;;;;;;;;;;;wCAG3C,OAAO,mBAAmB,IAAI,sBAC7B,mOAAC;4CAAK,WAAU;;gDACb,OAAO,mBAAmB;gDAAC;;;;;;;;;;;;;gCAKjC,OAAO,MAAM,kBACZ,mOAAC;oCAAE,WAAU;;wCACV,OAAO,MAAM,CAAC,IAAI;wCAClB,OAAO,MAAM,CAAC,IAAI,GAAG,CAAC,GAAG,EAAE,OAAO,MAAM,CAAC,IAAI,EAAE,GAAG;;;;;;;gCAItD,OAAO,GAAG,kBACT,mOAAC;oCAAE,WAAU;8CACV,OAAO,GAAG;;;;;;8CAIf,mOAAC;oCAAI,WAAU;;sDACb,mOAAC;4CAAI,WAAU;sDACb,cAAA,mOAAC;0DAAE;;;;;;;;;;;sDAEL,mOAAC,gNAAI;4CAAC,MAAM,CAAC,SAAS,EAAE,OAAO,GAAG,EAAE;sDAClC,cAAA,mOAAC,yKAAM;gDAAC,SAAQ;gDAAU,MAAK;0DAAK;;;;;;;;;;;;;;;;;;2BArCnC,OAAO,GAAG;;;;;;;;;;;;;;;;;;;;;AAiD/B;GAjLwB;KAAA"}}]
}