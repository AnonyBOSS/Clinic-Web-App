{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ahmad/Downloads/ClincsManagmentSystem/components/Card.tsx"],"sourcesContent":["import React from 'react';\r\n\r\nexport default function Card({ children, className = '' }: { children: React.ReactNode; className?: string }) {\r\n  return (\r\n    <div className={`bg-white rounded-lg shadow p-6 ${className}`}>{children}</div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;;AAEe,SAAS,KAAK,EAAE,QAAQ,EAAE,YAAY,EAAE,EAAqD;IAC1G,qBACE,mOAAC;QAAI,WAAW,CAAC,+BAA+B,EAAE,WAAW;kBAAG;;;;;;AAEpE;KAJwB"}},
    {"offset": {"line": 30, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ahmad/Downloads/ClincsManagmentSystem/components/Spinner.tsx"],"sourcesContent":["import React from 'react';\r\n\r\nexport default function Spinner({ className = 'h-6 w-6' }: { className?: string }) {\r\n  return (\r\n    <svg className={`animate-spin text-gray-600 ${className}`} xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" aria-hidden>\r\n      <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\"></circle>\r\n      <path className=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z\"></path>\r\n    </svg>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;;AAEe,SAAS,QAAQ,EAAE,YAAY,SAAS,EAA0B;IAC/E,qBACE,mOAAC;QAAI,WAAW,CAAC,2BAA2B,EAAE,WAAW;QAAE,OAAM;QAA6B,MAAK;QAAO,SAAQ;QAAY,aAAW;;0BACvI,mOAAC;gBAAO,WAAU;gBAAa,IAAG;gBAAK,IAAG;gBAAK,GAAE;gBAAK,QAAO;gBAAe,aAAY;;;;;;0BACxF,mOAAC;gBAAK,WAAU;gBAAa,MAAK;gBAAe,GAAE;;;;;;;;;;;;AAGzD;KAPwB"}},
    {"offset": {"line": 82, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ahmad/Downloads/ClincsManagmentSystem/app/patient/dashboard/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useEffect, useState } from 'react';\r\nimport { useRouter } from 'next/navigation';\r\nimport Link from 'next/link';\r\nimport Card from '../../../components/Card';\r\nimport Button from '../../../components/Button';\r\nimport Spinner from '../../../components/Spinner';\r\nimport { useToast } from '../../../components/ToastContext';\r\n\r\ninterface Appointment {\r\n  _id: string;\r\n  status: string;\r\n  payment: any;\r\n  doctor_id: any;\r\n  clinic_id: any;\r\n  room_id: any;\r\n  createdAt: string;\r\n}\r\n\r\nexport default function PatientDashboard() {\r\n  const router = useRouter();\r\n  const [user, setUser] = useState<any>(null);\r\n  const [appointments, setAppointments] = useState<Appointment[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [activeTab, setActiveTab] = useState('appointments');\r\n  const { addToast } = useToast();\r\n\r\n  useEffect(() => {\r\n    const token = localStorage.getItem('token');\r\n    const userRole = localStorage.getItem('userRole');\r\n    const userStr = localStorage.getItem('user');\r\n\r\n    if (!token || userRole !== 'patient') {\r\n      router.push('/login');\r\n      return;\r\n    }\r\n\r\n    if (userStr) {\r\n      const parsedUser = JSON.parse(userStr);\r\n      setUser(parsedUser);\r\n      fetchAppointments(parsedUser.id);\r\n    }\r\n  }, []);\r\n\r\n  const fetchAppointments = async (patientId: string) => {\r\n    try {\r\n      setLoading(true);\r\n      const response = await fetch(`/api/appointments/book?patient_id=${patientId}`);\r\n      const data = await response.json();\r\n      setAppointments(data);\r\n    } catch (error) {\r\n      console.error('Error fetching appointments:', error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleLogout = () => {\r\n    localStorage.removeItem('token');\r\n    localStorage.removeItem('user');\r\n    localStorage.removeItem('userRole');\r\n    router.push('/');\r\n  };\r\n\r\n  const handleCancelAppointment = async (appointmentId: string) => {\r\n    try {\r\n      const res = await fetch(`/api/appointments/${appointmentId}`, {\r\n        method: 'DELETE',\r\n      });\r\n      if (!res.ok) throw new Error('Cancel failed');\r\n      setAppointments((prev) => prev.filter((a) => a._id !== appointmentId));\r\n      addToast({ type: 'success', message: 'Appointment cancelled' });\r\n    } catch (error: any) {\r\n      console.error('Error cancelling appointment:', error);\r\n      addToast({ type: 'error', message: error?.message || 'Cancel failed' });\r\n    }\r\n  };\r\n\r\n  if (!user) return <div className=\"text-center py-12\"><Spinner className=\"h-8 w-8\" /></div>;\r\n\r\n  const upcomingAppointments = appointments.filter((a) => a.status !== 'completed' && a.status !== 'cancelled');\r\n  const pastAppointments = appointments.filter((a) => a.status === 'completed' || a.status === 'cancelled');\r\n\r\n  return (\r\n    <div className=\"max-w-7xl mx-auto px-4 py-12\">\r\n      <div className=\"flex justify-between items-center mb-8\">\r\n        <h1 className=\"text-3xl font-bold\">Patient Dashboard</h1>\r\n        <Button variant=\"destructive\" onClick={handleLogout}>Logout</Button>\r\n      </div>\r\n\r\n      <Card className=\"mb-8\">\r\n        <div className=\"flex items-center justify-between\">\r\n          <div>\r\n            <h2 className=\"text-xl font-bold mb-1\">Welcome, {user.full_name}!</h2>\r\n            <p className=\"text-sm text-gray-600\">{user.email} â€¢ {user.phone}</p>\r\n          </div>\r\n          <Link href=\"/doctors\"><Button variant=\"primary\">Book New Appointment</Button></Link>\r\n        </div>\r\n      </Card>\r\n\r\n      {/* Tabs */}\r\n      <div className=\"mb-6 flex space-x-4\">\r\n        <button\r\n          onClick={() => setActiveTab('appointments')}\r\n          className={`px-4 py-2 rounded ${\r\n            activeTab === 'appointments'\r\n              ? 'bg-blue-600 text-white'\r\n              : 'bg-gray-200'\r\n          }`}\r\n        >\r\n          Upcoming ({upcomingAppointments.length})\r\n        </button>\r\n        <button\r\n          onClick={() => setActiveTab('history')}\r\n          className={`px-4 py-2 rounded ${\r\n            activeTab === 'history'\r\n              ? 'bg-blue-600 text-white'\r\n              : 'bg-gray-200'\r\n          }`}\r\n        >\r\n          History ({pastAppointments.length})\r\n        </button>\r\n        <button\r\n          onClick={() => setActiveTab('profile')}\r\n          className={`px-4 py-2 rounded ${\r\n            activeTab === 'profile'\r\n              ? 'bg-blue-600 text-white'\r\n              : 'bg-gray-200'\r\n          }`}\r\n        >\r\n          Profile\r\n        </button>\r\n      </div>\r\n\r\n      {/* Appointments Tab */}\r\n      {activeTab === 'appointments' && (\r\n        <div>\r\n          {loading ? (\r\n            <div className=\"text-center py-12\"><Spinner className=\"h-8 w-8\" /></div>\r\n          ) : upcomingAppointments.length === 0 ? (\r\n            <Card className=\"text-center\">\r\n              <p className=\"text-gray-600\">No upcoming appointments</p>\r\n            </Card>\r\n          ) : (\r\n            <div className=\"space-y-4\">\r\n              {upcomingAppointments.map((appointment) => (\r\n                <Card key={appointment._id}>\r\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                    <div>\r\n                      <p className=\"font-semibold\">Dr. {appointment.doctor_id?.full_name}</p>\r\n                      <p className=\"text-sm text-gray-600\">{appointment.doctor_id?.specializations?.join(', ')}</p>\r\n                    </div>\r\n                    <div className=\"text-right\">\r\n                      <p className=\"font-semibold\">{appointment.clinic_id?.name}</p>\r\n                      <p className=\"text-sm text-gray-600\">Room {appointment.room_id?.room_number}</p>\r\n                      <p className=\"text-sm mt-2\">Date: {new Date(appointment.createdAt).toLocaleDateString()}</p>\r\n                      <p className=\"text-sm\">Status: <span className=\"capitalize text-blue-600\">{appointment.status}</span></p>\r\n                      <div className=\"mt-3 flex justify-end gap-2\">\r\n                        <Button variant=\"outline\" size=\"sm\" onClick={() => router.push(`/appointments/${appointment._id}`)}>Details</Button>\r\n                        <Button variant=\"destructive\" size=\"sm\" onClick={() => handleCancelAppointment(appointment._id)}>Cancel</Button>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </Card>\r\n              ))}\r\n            </div>\r\n          )}\r\n        </div>\r\n      )}\r\n\r\n      {/* History Tab */}\r\n      {activeTab === 'history' && (\r\n        <div>\r\n          {pastAppointments.length === 0 ? (\r\n            <Card className=\"text-center\">\r\n              <p className=\"text-gray-600\">No appointment history</p>\r\n            </Card>\r\n          ) : (\r\n            <div className=\"space-y-4\">\r\n              {pastAppointments.map((appointment) => (\r\n                <Card key={appointment._id} className=\"opacity-90\">\r\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                    <div>\r\n                      <p className=\"font-semibold\">Dr. {appointment.doctor_id?.full_name}</p>\r\n                    </div>\r\n                    <div className=\"text-right\">\r\n                      <p className=\"text-sm\">Status: <span className=\"capitalize\">{appointment.status}</span></p>\r\n                    </div>\r\n                  </div>\r\n                </Card>\r\n              ))}\r\n            </div>\r\n          )}\r\n        </div>\r\n      )}\r\n\r\n      {/* Profile Tab */}\r\n      {activeTab === 'profile' && (\r\n        <Card>\r\n          <h2 className=\"text-2xl font-bold mb-4\">Edit Profile</h2>\r\n          <p className=\"text-gray-600\">Profile editing coming soon...</p>\r\n        </Card>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 616, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ahmad/Downloads/ClincsManagmentSystem/node_modules/next/navigation.js"],"sourcesContent":["module.exports = require('./dist/client/components/navigation')\n"],"names":[],"mappings":"AAAA,OAAO,OAAO","ignoreList":[0]}}]
}