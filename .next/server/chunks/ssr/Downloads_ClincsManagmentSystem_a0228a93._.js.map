{"version":3,"sources":["../../../../../../Downloads/ClincsManagmentSystem/components/FormField.tsx","../../../../../../Downloads/ClincsManagmentSystem/components/Card.tsx","../../../../../../Downloads/ClincsManagmentSystem/components/Button.tsx","../../../../../../Downloads/ClincsManagmentSystem/components/Spinner.tsx","../../../../../../Downloads/ClincsManagmentSystem/components/Input.tsx","../../../../../../Downloads/ClincsManagmentSystem/components/Alert.tsx","../../../../../../Downloads/ClincsManagmentSystem/app/login/page.tsx"],"sourcesContent":["import React from 'react';\r\n\r\ninterface FormFieldProps {\r\n  label: string;\r\n  htmlFor?: string;\r\n  helper?: string;\r\n  error?: string | null;\r\n  children: React.ReactNode;\r\n}\r\n\r\nexport default function FormField({ label, htmlFor, helper, error, children }: FormFieldProps) {\r\n  const errorId = htmlFor ? `${htmlFor}-error` : undefined;\r\n\r\n  // If the child is a valid React element, clone it and inject aria props\r\n  const childWithA11y = React.isValidElement(children)\r\n    ? React.cloneElement(children as any, {\r\n        id: (children as any).props.id || htmlFor,\r\n        ...(errorId ? { 'aria-describedby': errorId } : {}),\r\n        ...(error ? { invalid: true } : {}),\r\n      })\r\n    : children;\r\n\r\n  return (\r\n    <div className=\"mb-5\">\r\n      <label htmlFor={htmlFor} className=\"block text-sm font-medium text-slate-700 mb-2\">\r\n        {label}\r\n      </label>\r\n      <div>{childWithA11y}</div>\r\n      {helper && <p className=\"text-xs text-slate-500 mt-1\">{helper}</p>}\r\n      {error && <p id={errorId} className=\"text-xs text-red-600 mt-1\">{error}</p>}\r\n    </div>\r\n  );\r\n}\r\n","import React from 'react';\r\n\r\nexport default function Card({ children, className = '', ...props }: React.HTMLAttributes<HTMLDivElement> & { children: React.ReactNode; className?: string }) {\r\n  return (\r\n    <div role=\"group\" className={`card ${className}`} {...props}>{children}</div>\r\n  );\r\n}\r\n","import React from 'react';\r\n\r\ntype Variant = 'primary' | 'secondary' | 'outline' | 'destructive';\r\ntype Size = 'sm' | 'md' | 'lg';\r\n\r\ninterface ButtonProps extends React.ButtonHTMLAttributes<HTMLButtonElement> {\r\n  variant?: Variant;\r\n  size?: Size;\r\n  className?: string;\r\n}\r\n\r\nconst VARIANT_CLASSES: Record<Variant, string> = {\r\n  primary: 'btn-primary',\r\n  secondary: 'btn-secondary',\r\n  outline: 'border border-slate-300 text-slate-800 bg-white hover:bg-slate-50',\r\n  destructive: 'bg-red-600 text-white hover:bg-red-700',\r\n};\r\n\r\nconst SIZE_CLASSES: Record<Size, string> = {\r\n  sm: 'px-3 py-1.5 text-sm',\r\n  md: 'px-4 py-2 text-base',\r\n  lg: 'px-6 py-3 text-lg',\r\n};\r\n\r\nexport default function Button({\r\n  variant = 'primary',\r\n  size = 'md',\r\n  className = '',\r\n  children,\r\n  ...props\r\n}: ButtonProps) {\r\n  return (\r\n    <button\r\n      className={`btn ${VARIANT_CLASSES[variant]} ${SIZE_CLASSES[size]} ${className}`}\r\n      {...props}\r\n    >\r\n      {children}\r\n    </button>\r\n  );\r\n}\r\n","import React from 'react';\r\n\r\nexport default function Spinner({ className = 'h-6 w-6' }: { className?: string }) {\r\n  return (\r\n    <svg className={`animate-spin text-gray-600 ${className}`} xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" aria-hidden>\r\n      <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\"></circle>\r\n      <path className=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z\"></path>\r\n    </svg>\r\n  );\r\n}\r\n","import React from 'react';\r\n\r\ntype InputProps = React.InputHTMLAttributes<HTMLInputElement> & {\r\n  textarea?: boolean;\r\n  className?: string;\r\n  /** id of an error element to link via aria-describedby */\r\n  errorId?: string;\r\n  /** indicate the input is invalid */\r\n  invalid?: boolean;\r\n};\r\n\r\nconst baseClass = 'form-input';\r\n\r\nexport default function Input({ textarea, className = '', errorId, invalid, ...props }: InputProps) {\r\n  const ariaProps: Record<string, any> = {};\r\n  if (invalid) ariaProps['aria-invalid'] = true;\r\n  if (errorId) ariaProps['aria-describedby'] = errorId;\r\n\r\n  if (textarea) {\r\n    // @ts-ignore allow textarea props\r\n    return <textarea className={`${baseClass} ${className}`} {...ariaProps} {...(props as any)} />;\r\n  }\r\n\r\n  return <input className={`${baseClass} ${className}`} {...ariaProps} {...props} />;\r\n}\r\n","import React from 'react';\r\n\r\nexport default function Alert({\r\n  type = 'info',\r\n  children,\r\n}: {\r\n  type?: 'info' | 'success' | 'error' | 'warning';\r\n  children: React.ReactNode;\r\n}) {\r\n  const classes =\r\n    type === 'success'\r\n      ? 'bg-green-50 text-green-800 border border-green-100'\r\n      : type === 'error'\r\n      ? 'bg-red-50 text-red-800 border border-red-100'\r\n      : type === 'warning'\r\n      ? 'bg-yellow-50 text-yellow-800 border border-yellow-100'\r\n      : 'bg-blue-50 text-blue-800 border border-blue-100';\r\n\r\n  return (\r\n    <div role=\"alert\" className={`p-3 rounded-md ${classes}`}>\r\n      {children}\r\n    </div>\r\n  );\r\n}\r\n","\"use client\";\r\n\r\nimport { useState } from 'react';\r\nimport { useRouter } from 'next/navigation';\r\nimport Link from 'next/link';\r\nimport Card from '../../components/Card';\r\nimport Button from '../../components/Button';\r\nimport FormField from '../../components/FormField';\r\nimport Spinner from '../../components/Spinner';\r\nimport Alert from '../../components/Alert';\r\nimport Input from '../../components/Input';\r\n\r\nexport default function PatientLogin() {\r\n  const [email, setEmail] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  const [error, setError] = useState('');\r\n  const [fieldErrors, setFieldErrors] = useState<{ email?: string; password?: string }>({});\r\n  const [loading, setLoading] = useState(false);\r\n  const router = useRouter();\r\n\r\n  const validate = () => {\r\n    const errs: { email?: string; password?: string } = {};\r\n    if (!email || !email.includes('@')) errs.email = 'Please enter a valid email';\r\n    if (!password || password.length < 6) errs.password = 'Password must be at least 6 characters';\r\n    setFieldErrors(errs);\r\n    return Object.keys(errs).length ? errs : null;\r\n  };\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    const clientError = validate();\r\n    if (clientError) {\r\n      const first = Object.values(clientError as any)[0] as string;\r\n      return setError(first);\r\n    }\r\n    setError('');\r\n    setLoading(true);\r\n\r\n    try {\r\n      const response = await fetch('/api/auth/patient/login', {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({ email, password }),\r\n      });\r\n\r\n      const data = await response.json();\r\n\r\n      if (!response.ok) {\r\n        setError(data.error || 'Login failed');\r\n        return;\r\n      }\r\n\r\n      localStorage.setItem('token', data.token);\r\n      localStorage.setItem('user', JSON.stringify(data.patient));\r\n      localStorage.setItem('userRole', 'patient');\r\n\r\n      router.push('/patient/dashboard');\r\n    } catch (err: any) {\r\n      setError(err.message || 'An error occurred');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"max-w-md mx-auto mt-12\">\r\n      <Card>\r\n        <h1 className=\"text-2xl font-bold mb-4\">Patient Login</h1>\r\n\r\n        {error && <Alert type=\"error\">{error}</Alert>}\r\n\r\n        <form onSubmit={handleSubmit} className=\"mt-4\">\r\n          <FormField label=\"Email\" htmlFor=\"email\">\r\n            <Input\r\n              id=\"email\"\r\n              type=\"email\"\r\n              value={email}\r\n              onChange={(e) => { setEmail(e.target.value); setFieldErrors((s) => ({ ...s, email: undefined })); }}\r\n              className={fieldErrors.email ? 'border-red-400 ring-1 ring-red-100' : ''}\r\n            />\r\n          </FormField>\r\n\r\n          <FormField label=\"Password\" htmlFor=\"password\">\r\n            <Input\r\n              id=\"password\"\r\n              type=\"password\"\r\n              value={password}\r\n              onChange={(e) => { setPassword(e.target.value); setFieldErrors((s) => ({ ...s, password: undefined })); }}\r\n              className={fieldErrors.password ? 'border-red-400 ring-1 ring-red-100' : ''}\r\n            />\r\n          </FormField>\r\n\r\n          <div className=\"mt-4\">\r\n            <Button type=\"submit\" className=\"w-full\" disabled={loading}>\r\n              {loading ? <Spinner className=\"h-4 w-4\" /> : 'Login'}\r\n            </Button>\r\n          </div>\r\n        </form>\r\n\r\n        <p className=\"mt-4 text-center text-sm text-gray-600\">\r\n          Don't have an account? <Link href=\"/register\" className=\"text-blue-600 underline\">Register</Link>\r\n        </p>\r\n\r\n        <p className=\"mt-2 text-center text-sm\">\r\n          <Link href=\"/doctor/login\" className=\"text-blue-600 underline\">Doctor login</Link>\r\n        </p>\r\n      </Card>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}