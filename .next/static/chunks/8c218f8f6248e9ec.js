(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,22248,e=>{"use strict";var t=e.i(52018);function s({children:e,className:s="",...a}){return(0,t.jsx)("div",{role:"group",className:`card ${s}`,...a,children:e})}e.s(["default",()=>s])},7323,e=>{"use strict";var t=e.i(52018);let s={primary:"btn-primary",secondary:"btn-secondary",outline:"border border-slate-300 text-slate-800 bg-white hover:bg-slate-50",destructive:"bg-red-600 text-white hover:bg-red-700"},a={sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-base",lg:"px-6 py-3 text-lg"};function l({variant:e="primary",size:l="md",className:i="",children:r,...n}){return(0,t.jsx)("button",{className:`btn ${s[e]} ${a[l]} ${i}`,...n,children:r})}e.s(["default",()=>l])},92214,e=>{"use strict";var t=e.i(52018);function s({className:e="h-6 w-6"}){return(0,t.jsxs)("svg",{className:`animate-spin text-gray-600 ${e}`,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","aria-hidden":!0,children:[(0,t.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,t.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"})]})}e.s(["default",()=>s])},66249,e=>{"use strict";var t=e.i(52018);function s({type:e="info",children:s}){return(0,t.jsx)("div",{role:"alert",className:`p-3 rounded-md ${"success"===e?"bg-green-50 text-green-800 border border-green-100":"error"===e?"bg-red-50 text-red-800 border border-red-100":"warning"===e?"bg-yellow-50 text-yellow-800 border border-yellow-100":"bg-blue-50 text-blue-800 border border-blue-100"}`,children:s})}e.s(["default",()=>s])},1948,e=>{"use strict";var t=e.i(52018),s=e.i(39513),a=e.i(20158),l=e.i(69474),i=e.i(22248),r=e.i(7323),n=e.i(92214),d=e.i(66249);function o(){let e=(0,a.useParams)(),o=(0,a.useRouter)(),c=e.id,[x,m]=(0,s.useState)(null),[h,p]=(0,s.useState)([]),[f,u]=(0,s.useState)(null),[g,b]=(0,s.useState)(""),[j,N]=(0,s.useState)(!0),[y,v]=(0,s.useState)(!1),[w,k]=(0,s.useState)(""),[_,S]=(0,s.useState)(null);(0,s.useEffect)(()=>{let e=localStorage.getItem("user");e&&S(JSON.parse(e)),c&&C()},[c]);let C=async()=>{try{let e=await fetch(`/api/doctors/${c}`),t=await e.json();m(t.doctor)}catch(e){console.error("Error fetching doctor:",e)}finally{N(!1)}},D=async e=>{let t=e.target.value;b(t),u(null),t&&await $(t)},$=async e=>{try{v(!0);let t=await fetch(`/api/slots/available?doctor_id=${c}&date=${e}`),s=await t.json();p(s)}catch(e){console.error("Error fetching slots:",e)}finally{v(!1)}},B=async()=>{if(!f||!_)return void k("Please select a slot and login first");if(!g)return void k("Please select a date");let e=h.find(e=>e._id===f);if(e)try{k("");let t=await fetch("/api/appointments/book",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({patient_id:_.id,doctor_id:c,clinic_id:x?.clinic_affiliations?.[0]?._id||"",slot_id:f,room_id:e.room_id._id,payment_amount:100,payment_method:"cash"})});if(!t.ok){let e=await t.json();k(e.error||"Booking failed");return}o.push("/patient/dashboard")}catch(e){k(e.message||"An error occurred")}};return j?(0,t.jsx)("div",{className:"min-h-screen bg-gradient-to-b from-slate-50 via-white to-slate-50 flex items-center justify-center",children:(0,t.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,t.jsx)(n.default,{className:"h-12 w-12 text-indigo-600"}),(0,t.jsx)("p",{className:"text-slate-600 font-medium",children:"Loading doctor profile..."})]})}):x?(0,t.jsx)("div",{className:"min-h-screen bg-gradient-to-b from-slate-50 via-white to-slate-50",children:(0,t.jsxs)("div",{className:"site-container py-16 lg:py-24",children:[(0,t.jsxs)(l.default,{href:"/doctors",className:"inline-flex items-center text-indigo-600 hover:text-indigo-700 font-semibold mb-8 transition-colors",children:[(0,t.jsx)("span",{className:"mr-2",children:"â†"})," Back to Doctors"]}),(0,t.jsx)("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-100 p-8 lg:p-12 space-y-6 mb-12",children:(0,t.jsxs)("div",{className:"flex flex-col lg:flex-row items-start lg:items-center gap-8 justify-between",children:[(0,t.jsx)("div",{className:"w-24 h-24 rounded-full bg-gradient-to-br from-indigo-100 to-blue-100 flex items-center justify-center text-5xl shrink-0 border-4 border-indigo-200",children:"ðŸ‘¨â€âš•ï¸"}),(0,t.jsxs)("div",{className:"flex-1 space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("h1",{className:"text-4xl lg:text-5xl font-bold text-slate-900",children:["Dr. ",x.full_name]}),(0,t.jsx)("div",{className:"flex flex-wrap gap-2 mt-4",children:x.specializations.map((e,s)=>(0,t.jsx)("span",{className:"inline-flex items-center rounded-full bg-indigo-50 text-indigo-700 px-4 py-2 text-sm font-semibold border border-indigo-200",children:e},s))})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-6 text-sm",children:[(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("p",{className:"text-slate-500 font-medium uppercase tracking-wide text-xs",children:"Email"}),(0,t.jsx)("p",{className:"text-slate-800 font-semibold",children:x.email})]}),(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("p",{className:"text-slate-500 font-medium uppercase tracking-wide text-xs",children:"Phone"}),(0,t.jsx)("a",{href:`tel:${x.phone}`,className:"text-indigo-600 font-semibold hover:text-indigo-700 underline",children:x.phone})]})]}),x.qualifications&&x.qualifications.length>0&&(0,t.jsxs)("div",{className:"pt-4 border-t border-slate-100",children:[(0,t.jsx)("p",{className:"text-slate-500 font-medium uppercase tracking-wide text-xs mb-2",children:"Qualifications"}),(0,t.jsx)("ul",{className:"space-y-1",children:x.qualifications.map((e,s)=>(0,t.jsxs)("li",{className:"text-slate-700 flex items-start gap-2",children:[(0,t.jsx)("span",{className:"text-indigo-600 mt-1",children:"âœ“"}),(0,t.jsx)("span",{className:"font-medium",children:e})]},s))})]}),x.clinic_affiliations&&x.clinic_affiliations.length>0&&(0,t.jsxs)("div",{className:"pt-4 border-t border-slate-100",children:[(0,t.jsx)("p",{className:"text-slate-500 font-medium uppercase tracking-wide text-xs mb-2",children:"Clinic Affiliations"}),(0,t.jsx)("div",{className:"flex flex-wrap gap-2",children:x.clinic_affiliations.map((e,s)=>(0,t.jsxs)("span",{className:"inline-flex items-center rounded-full bg-green-50 text-green-700 px-3 py-1.5 text-xs font-semibold border border-green-200",children:["ðŸ¥ ",e.name||"Clinic"]},s))})]})]}),(0,t.jsx)("div",{className:"hidden lg:flex lg:items-start lg:pl-6",children:(0,t.jsx)("button",{onClick:()=>document.getElementById("booking")?.scrollIntoView({behavior:"smooth"}),className:"rounded-lg px-5 py-3 bg-indigo-600 text-white font-semibold hover:bg-indigo-700",children:"Book Appointment"})})]})}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,t.jsxs)(i.default,{id:"booking",className:"lg:col-span-2 p-8 space-y-8 border border-slate-100",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Book an Appointment"}),(0,t.jsxs)("p",{className:"text-slate-600",children:["Schedule your consultation with Dr. ",x.full_name]})]}),!_&&(0,t.jsxs)(d.default,{type:"warning",children:[(0,t.jsx)("span",{className:"font-semibold",children:"Login Required"}),(0,t.jsxs)("p",{className:"text-sm mt-1",children:["Please ",(0,t.jsx)(l.default,{href:"/login",className:"underline font-semibold",children:"login"})," to book an appointment"]})]}),w&&(0,t.jsx)(d.default,{type:"error",children:w}),(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)("label",{htmlFor:"date",className:"block text-sm font-bold text-slate-700 uppercase tracking-wide",children:"Select Date"}),(0,t.jsx)("input",{id:"date",type:"date",value:g,onChange:D,min:new Date().toISOString().split("T")[0],className:"w-full px-4 py-3 rounded-lg border border-slate-200 bg-white focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all text-slate-900 font-medium"})]}),g&&(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)("label",{className:"block text-sm font-bold text-slate-700 uppercase tracking-wide",children:"Available Time Slots"}),y?(0,t.jsx)("div",{className:"py-8 flex items-center justify-center",children:(0,t.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[(0,t.jsx)(n.default,{className:"h-8 w-8 text-indigo-600"}),(0,t.jsx)("p",{className:"text-sm text-slate-600",children:"Loading available slots..."})]})}):0===h.length?(0,t.jsxs)("div",{className:"bg-slate-50 rounded-lg border border-slate-200 p-6 text-center space-y-2",children:[(0,t.jsx)("p",{className:"text-slate-600 font-medium",children:"No slots available for this date"}),(0,t.jsx)("p",{className:"text-sm text-slate-500",children:"Try selecting a different date"})]}):(0,t.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-3",children:h.map(e=>(0,t.jsxs)("button",{onClick:()=>u(e._id),className:`p-3 rounded-lg border-2 transition-all text-center font-semibold ${f===e._id?"bg-indigo-600 border-indigo-600 text-white shadow-lg":"bg-white border-slate-200 text-slate-900 hover:border-indigo-300 hover:bg-indigo-50"}`,children:[(0,t.jsx)("div",{className:"text-base",children:e.time}),(0,t.jsxs)("div",{className:`text-xs mt-1 ${f===e._id?"text-indigo-100":"text-slate-500"}`,children:["Room ",e.room_id.room_number]})]},e._id))})]}),(0,t.jsx)(r.default,{onClick:B,disabled:!f||!_,className:"w-full py-4 text-lg font-bold",children:_?f?"âœ“ Confirm Booking":"ðŸ“… Select a Date & Time":"ðŸ‘¤ Login to Book"})]})]}),(0,t.jsx)(i.default,{className:"p-8 space-y-6 border border-slate-100 h-fit sticky top-24",children:(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-xl font-bold text-slate-900 mb-4",children:"Booking Summary"}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("p",{className:"text-slate-500 font-medium text-xs uppercase tracking-wide",children:"Doctor"}),(0,t.jsxs)("p",{className:"text-slate-900 font-bold",children:["Dr. ",x.full_name]})]}),g&&(0,t.jsxs)("div",{className:"space-y-2 pt-4 border-t border-slate-100",children:[(0,t.jsx)("p",{className:"text-slate-500 font-medium text-xs uppercase tracking-wide",children:"Appointment Date"}),(0,t.jsx)("p",{className:"text-slate-900 font-bold",children:new Date(g).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]}),f&&h.find(e=>e._id===f)&&(0,t.jsxs)("div",{className:"space-y-2 pt-4 border-t border-slate-100",children:[(0,t.jsx)("p",{className:"text-slate-500 font-medium text-xs uppercase tracking-wide",children:"Time Slot"}),(0,t.jsx)("p",{className:"text-slate-900 font-bold text-lg",children:h.find(e=>e._id===f)?.time})]}),(0,t.jsxs)("div",{className:"space-y-2 pt-4 border-t border-slate-100",children:[(0,t.jsx)("p",{className:"text-slate-500 font-medium text-xs uppercase tracking-wide",children:"Consultation Fee"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-indigo-600",children:"$100"})]}),(0,t.jsx)("div",{className:"pt-4 border-t border-slate-100",children:(0,t.jsx)("p",{className:"text-xs text-slate-500",children:"ðŸ’³ Pay at clinic after consultation"})})]})]})})]})]})}):(0,t.jsx)("div",{className:"min-h-screen bg-gradient-to-b from-slate-50 via-white to-slate-50 flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center space-y-4",children:[(0,t.jsx)("p",{className:"text-5xl",children:"ðŸ‘¨â€âš•ï¸"}),(0,t.jsx)("p",{className:"text-slate-600 text-lg font-medium",children:"Doctor not found"}),(0,t.jsx)(l.default,{href:"/doctors",children:(0,t.jsx)(r.default,{children:"Back to Doctors"})})]})})}e.s(["default",()=>o])}]);