(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,48321,e=>{"use strict";var s=e.i(52018),t=e.i(39513),a=e.i(20158);function l(){let e=(0,a.useRouter)(),[l,r]=(0,t.useState)(null),[c,d]=(0,t.useState)([]),[i,n]=(0,t.useState)([]),[o,m]=(0,t.useState)(!0),[h,x]=(0,t.useState)("schedule"),[g,u]=(0,t.useState)("");(0,t.useEffect)(()=>{let s=localStorage.getItem("token"),t=localStorage.getItem("userRole"),a=localStorage.getItem("user");if(!s||"doctor"!==t)return void e.push("/doctor/login");if(a){let e=JSON.parse(a);r(e),p(e.id)}},[]);let p=async e=>{try{let s=new Date().toISOString().split("T")[0],t=await fetch(`/api/doctors/${e}?date=${s}`),a=await t.json();d(a.schedule||[]),n(a.appointments||[]),u(s)}catch(e){console.error("Error fetching doctor data:",e)}finally{m(!1)}},j=async e=>{let s=e.target.value;u(s);try{let e=await fetch(`/api/doctors/${l.id}?date=${s}`),t=await e.json();n(t.appointments||[])}catch(e){console.error("Error fetching appointments:",e)}};return l?(0,s.jsxs)("div",{className:"max-w-7xl mx-auto px-4 py-12",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,s.jsx)("h1",{className:"text-4xl font-bold",children:"Doctor Dashboard"}),(0,s.jsx)("button",{onClick:()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),localStorage.removeItem("userRole"),e.push("/")},className:"bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700",children:"Logout"})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow p-6 mb-8",children:[(0,s.jsxs)("h2",{className:"text-2xl font-bold mb-4",children:["Welcome, Dr. ",l.full_name,"!"]}),(0,s.jsxs)("p",{className:"text-gray-600 mb-2",children:[(0,s.jsx)("strong",{children:"Email:"})," ",l.email]}),(0,s.jsxs)("p",{className:"text-gray-600",children:[(0,s.jsx)("strong",{children:"Specializations:"})," ",l.specializations?.join(", ")||"General Practice"]})]}),(0,s.jsxs)("div",{className:"mb-6 flex space-x-4",children:[(0,s.jsx)("button",{onClick:()=>x("schedule"),className:`px-4 py-2 rounded ${"schedule"===h?"bg-blue-600 text-white":"bg-gray-200"}`,children:"Today's Schedule"}),(0,s.jsx)("button",{onClick:()=>x("manage"),className:`px-4 py-2 rounded ${"manage"===h?"bg-blue-600 text-white":"bg-gray-200"}`,children:"Manage Schedule"})]}),"schedule"===h&&(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:[(0,s.jsx)("label",{className:"block text-gray-700 font-bold mb-2",children:"Select Date"}),(0,s.jsx)("input",{type:"date",value:g,onChange:j,className:"px-4 py-2 border border-gray-300 rounded"})]}),0===i.length?(0,s.jsx)("div",{className:"bg-white rounded-lg shadow p-6 text-center",children:(0,s.jsx)("p",{className:"text-gray-600",children:"No appointments for this date"})}):(0,s.jsx)("div",{className:"space-y-4",children:i.map(e=>(0,s.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-bold",children:e.patient_id?.full_name}),(0,s.jsxs)("p",{className:"text-gray-600 text-sm",children:["Patient ID: ",e.patient_id?._id]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-bold",children:e.clinic_id?.name}),(0,s.jsxs)("p",{className:"text-gray-600 text-sm",children:["Room ",e.room_id?.room_number]})]}),(0,s.jsx)("div",{children:(0,s.jsxs)("p",{className:"text-sm",children:[(0,s.jsx)("strong",{children:"Status:"})," ",(0,s.jsx)("span",{className:"capitalize text-blue-600",children:e.status})]})})]})},e._id))})]}),"manage"===h&&(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Manage Working Schedule"}),(0,s.jsx)("p",{className:"text-gray-600 mb-4",children:"Current Schedule:"}),c.length>0?(0,s.jsx)("div",{className:"space-y-2",children:c.map((e,t)=>(0,s.jsxs)("div",{className:"border border-gray-200 p-3 rounded",children:[(0,s.jsx)("p",{className:"font-bold",children:e.day}),(0,s.jsxs)("p",{className:"text-gray-600",children:[e.start_time," - ",e.end_time]})]},t))}):(0,s.jsx)("p",{className:"text-gray-600",children:"No schedule set"}),(0,s.jsx)("p",{className:"text-gray-600 mt-4",children:"Schedule management coming soon..."})]})]}):(0,s.jsx)("div",{className:"text-center py-12",children:"Loading..."})}e.s(["default",()=>l])}]);